//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/**
 * jQuery Validation Plugin 1.8.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

/* NUGET: BEGIN LICENSE TEXT
 *
 * Microsoft grants you the right to use these script files for the sole
 * purpose of either: (i) interacting through your browser with the Microsoft
 * website or online service, subject to the applicable licensing or use
 * terms; or (ii) using the files as included with a Microsoft product subject
 * to that product's license terms. Microsoft reserves all other rights to the
 * files not expressly granted by Microsoft, whether by implication, estoppel
 * or otherwise. Insofar as a script file is dual licensed under GPL,
 * Microsoft neither took the code under GPL nor distributes it thereunder but
 * under the terms set out in this paragraph. All notices and licenses
 * below are for informational purposes only.
 *
 * NUGET: END LICENSE TEXT */

/*!
 ** Unobtrusive validation support library for jQuery and jQuery Validate
 ** Copyright (C) Microsoft Corporation. All rights reserved.
 */

/*! Cookies.js - 0.4.0; Copyright (c) 2014, Scott Hamper; http://www.opensource.org/licenses/MIT */

// Copyright 2012 Google Inc. All Rights Reserved.

/*

Tooltipster 3.2.6 | 2014-07-16
A rockin' custom tooltip jQuery plugin

Developed by Caleb Jacob under the MIT license http://opensource.org/licenses/MIT

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/

define("jquery",[],function(){return jQuery}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),define("commonPlugins",["jquery"],function(e){var t=function(){return{_init:function(){e.$htmlBody=e("html, body"),e.$body=e("body"),e.$document=e(document),e.$html=e("html"),e.$window=e(window),this._searchBind(),this._initFormLoading(),this._docFiltersBind(),this._extendJquery(),this._loginBinding(),e.$body.addClass(e.browser.device?"mobile":"desktop")},_loginBinding:function(){e.$body.on("submitted",".logingForm",function(e,t){t.IsValid&&document.location.reload()})},_extendJquery:function(){e.fn.valWithChange=function(t,n){n=n||"change",e(this).val(t).trigger(n)},e.browser={device:/iPhone|iPod|iPad|Android|webOS|Windows Phone|BlackBerry/.test(navigator.userAgent)}},_initFormLoading:function(){e.$body.find(".form_loading").each(function(){var t=e(this).find("input[type=submit]"),n=t.siblings("label"),r='<span class="loading_info"><span></span></span>';n.append(r)}),e.$body.find(".form_loading").on("submitted",function(){var t=e(this),n=t.find("input[type=submit]"),r=t.find(".loading_info");n.show(),n.removeAttr("disabled"),r.hide()}),e.$body.find(".form_loading").on("submit",function(t){var n=e(this),r=n.find("input[type=submit]"),i=n.find(".loading_info");i.show(),n.valid()?(r.hide(),r.attr("disabled","disabled")):(r.show(),r.removeAttr("disabled"),i.hide())})},_docFiltersBind:function(){e.$body.on("change","select.doc-filter-period",function(){var t=e(this).val();window.location=t})},_tableSwitchBind:function(){var t=e(".tab"),n=t.find(".tab-Header"),r=t.find(".tab-Box");e.$body.on("click",".tab-Header",function(t){var i=e(event.target),s=i.data("id");n.removeClass("enable"),r.hide(),i.addClass("enable"),r.filter("[data-id="+s+"]").show()})},_searchBind:function(){e.fn.extend({getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.href);return r==null?"":decodeURIComponent(r[1].replace(/\+/g," "))}}),typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e("div.search,li.search,div.search_inpublic,div#search,div.fill_input,div.search-filter").each(function(){var t=e(this).find(":input[type=text]"),n=e(this).find(":input[type=submit]"),r=e(this).getParameterByName("quick_search"),i=r==undefined||r==""?t.val():"";t.focus(function(){t.val()===i&&t.val("")}),t.focusout(function(){t.val()===""&&t.val(i)}),n.click(function(){t.val()===i&&t.val("")})})}}},n=t();return n._init(),n}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var n=e.data(this[0],"validator");return n?n:(n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){n.cancelSubmit=!0}),n.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){n.submitButton=this}),this.submit(function(t){function r(){if(n.settings.submitHandler){if(n.submitButton)var t=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm);return n.settings.submitHandler.call(n,n.currentForm),n.submitButton&&t.remove(),!1}return!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0];if(t){var i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;var u={};return e.each(n.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var a=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(a.required){var f=a.required;delete a.required,a=e.extend({required:f},a)}return a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length==1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!=Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!=Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");n.settings[r]&&n.settings[r].call(n,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={};e.each(this.settings.groups,function(n,r){e.each(r.split(/\s/),function(e,r){t[r]=n})});var n=this.settings.rules;e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",r).validateDelegate(":radio, :checkbox, select, option","click",r),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.clean(t),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t);return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name==t.name}).length==1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var n=e(t).rules(),r=!1;for(var i in n){var s={method:i,parameters:n[i]};try{var o=e.validator.methods[i].call(this,t.value.replace(/\r/g,""),t,s.parameters);if(o=="dependency-mismatch"){r=!0;continue}r=!1;if(o=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!o)return this.formatAndAdd(t,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",u),u}}if(r)return;return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(t,n){if(!e.metadata)return;var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[n]},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor==String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;typeof n=="function"?n=n.call(this,t.parameters,e):r.test(n)&&(n=jQuery.format(n.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,n=this.validElements();n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r=this.errorsFor(t);r.length?(r.removeClass().addClass(this.settings.errorClass),r.attr("generated")&&r.html(n)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!n&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var n=this.currentForm;return e(document.getElementsByName(t)).map(function(e,r){return r.form==n&&r.name==t&&r||null})},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest==0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor==String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t);for(var i in e.validator.methods){var s=r[i==="checkbox"?"prop":"attr"](i);s&&(n[i]=s)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!=undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";switch(n.nodeName.toLowerCase()){case"select":var i=e(n).val();return i&&i.length>0;case"input":if(this.checkable(n))return this.getLength(t,n)>0;default:return e.trim(t).length>0}},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(this.pending[n.name])return"pending";if(i.old===t)return i.valid;i.old=t;var s=this;this.startRequest(n);var o={};return o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,success:function(r){s.settings.messages[n.name].remote=i.originalMessage;var o=r===!0;if(o){var u=s.formSubmitted;s.prepareElement(n),s.formSubmitted=u,s.successList.push(n),s.showErrors()}else{var a={},f=r||s.defaultMessage(n,"remote");a[n.name]=i.message=e.isFunction(f)?f(t):f,s.showErrors(a)}i.valid=o,s.stopRequest(n,o)}},r)),"pending"},minlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)>=r},maxlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)<=r},rangelength:function(t,n,r){var i=this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(e))return!1;var n=0,r=0,i=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s),r=parseInt(o,10);i&&(r*=2)>9&&(r-=9),n+=r,i=!i}return n%10==0},accept:function(e,t,n){return n=typeof n=="string"?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},equalTo:function(t,n,r){var i=e(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()});return t==i.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode=="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i=="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}(jQuery),define("jqueryValidate",["jquery"],function(){}),function(e){function s(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function o(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function u(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function a(e){return e.substr(0,e.lastIndexOf(".")+1)}function f(e,t){return e.indexOf("*.")===0&&(e=e.replace("*.",t)),e}function l(t,n){var r=e(this).find("[data-valmsg-for='"+u(n[0].name)+"']"),i=r.attr("data-valmsg-replace"),s=i?e.parseJSON(i)!==!1:null;r.removeClass("field-validation-valid").addClass("field-validation-error"),t.data("unobtrusiveContainer",r),s?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function c(t,n){var r=e(this).find("[data-valmsg-summary=true]"),i=r.find("ul");i&&i.length&&n.errorList.length&&(i.empty(),r.addClass("validation-summary-errors").removeClass("validation-summary-valid"),e.each(n.errorList,function(){e("<li />").html(this.message).appendTo(i)}))}function h(t){var n=t.data("unobtrusiveContainer"),r=n.attr("data-valmsg-replace"),i=r?e.parseJSON(r):null;n&&(n.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),i&&n.empty())}function p(t){var n=e(this);n.data("validator").resetForm(),n.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function d(t){var n=e(t),s=n.data(r),o=e.proxy(p,t);return s||(s={options:{errorClass:"input-validation-error",errorElement:"span",errorContainer:e(i),errorPlacement:e.proxy(l,t),invalidHandler:e.proxy(c,t),messages:{},rules:{},success:e.proxy(h,t)},attachValidation:function(){n.unbind("reset."+r,o).bind("reset."+r,o).validate(this.options)},validate:function(){return n.validate(),n.valid()}},n.data(r,s)),s}var t=e.validator,n,r="unobtrusiveValidation",i=".messages";t.unobtrusive={adapters:[],parseElement:function(t,n){var r=e(t),i=r.parents("form")[0],s,o,u;if(!i)return;s=d(i),s.options.rules[t.name]=o={},s.options.messages[t.name]=u={},e.each(this.adapters,function(){var n="data-val-"+this.name,s=r.attr(n),a={};s!==undefined&&(n+="-",e.each(this.params,function(){a[this]=r.attr(n+this)}),this.adapt({element:t,form:i,message:s,params:a,rules:o,messages:u}))}),e.extend(o,{__dummy__:!0}),n||s.attachValidation()},parse:function(n){var r=e(n).parents("form").andSelf().add(e(n).find("form")).filter("form");e(n).find(":input").filter("[data-val=true]").each(function(){t.unobtrusive.parseElement(this,!0)}),r.each(function(){var e=d(this);e&&e.attachValidation()})}},n=t.unobtrusive.adapters,n.add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},n.addBool=function(e,t){return this.add(e,function(n){s(n,t||e,!0)})},n.addMinMax=function(e,t,n,r,i,o){return this.add(e,[i||"min",o||"max"],function(e){var i=e.params.min,o=e.params.max;i&&o?s(e,r,[i,o]):i?s(e,t,i):o&&s(e,n,o)})},n.addSingleVal=function(e,t,n){return this.add(e,[t||"val"],function(r){s(r,n||e,r.params[t])})},t.addMethod("__dummy__",function(e,t,n){return!0}),t.addMethod("regex",function(e,t,n){var r;return this.optional(t)?!0:(r=(new RegExp(n)).exec(e),r&&r.index===0&&r[0].length===e.length)}),t.addMethod("nonalphamin",function(e,t,n){var r;return n&&(r=e.match(/\W/g),r=r&&r.length>=n),r}),t.methods.extension?(n.addSingleVal("accept","mimtype"),n.addSingleVal("extension","extension")):n.addSingleVal("extension","extension","accept"),n.addSingleVal("regex","pattern"),n.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),n.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),n.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),n.add("equalto",["other"],function(t){var n=a(t.element.name),r=t.params.other,i=f(r,n),o=e(t.form).find(":input").filter("[name='"+u(i)+"']")[0];s(t,"equalTo",o)}),n.add("required",function(e){(e.element.tagName.toUpperCase()!=="INPUT"||e.element.type.toUpperCase()!=="CHECKBOX")&&s(e,"required",!0)}),n.add("remote",["url","type","additionalfields"],function(t){var n={url:t.params.url,type:t.params.type||"GET",data:{}},r=a(t.element.name);e.each(o(t.params.additionalfields||t.element.name),function(i,s){var o=f(s,r);n.data[o]=function(){return e(t.form).find(":input").filter("[name='"+u(o)+"']").val()}}),s(t,"remote",n)}),n.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&s(e,"minlength",e.params.min),e.params.nonalphamin&&s(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&s(e,"regex",e.params.regex)})}(jQuery),define("jqueryValidateUnobtrusive",["jqueryValidate"],function(){}),define("Shared/Product/Price",["Modules/Common"],function(){function e(e){_.bindAll(this,"_priceChanged"),this._options=e,this._$htPrice=$.$body.find("#price_ht"),this._$userPrice=$.$body.find("#user_price_ht");var t="#priceInput";$.$body.on("keyup change",t,this._priceChanged)}return e.prototype._priceChanged=function(t){var n=0,r=0,i=$(t.currentTarget).val();if(i.length>0){var s=e.parse(i);!isNaN(s)&&this._options.taxRate&&this._options.userCommissionPercent&&(n=Math.round(s/(this._options.taxRate/100+1)*100)/100,r=Math.round(n*(this._options.userCommissionPercent/100)*100)/100)}this._$htPrice.html(n+"€"),this._$userPrice.html(r+"€")},e.prototype._parsePrice=function(e){var t=e.replace(/,/g,".").replace(/\s/g,""),n=t.lastIndexOf(".");if(n>0){var r=t.substr(0,n);r=r.replace(/\./g,""),t=r+t.substring(n)}return parseFloat(t)},e.bind=function(t){new e(t)},e.parse=function(e){var t=e.replace(/,/g,".").replace(/\s/g,""),n=t.lastIndexOf(".");if(n>0){var r=t.substr(0,n);r=r.replace(/\./g,""),t=r+t.substring(n)}return parseFloat(t)},e}),define("Shared/Common/Validator/main",["require","jquery","jqueryValidate","jqueryValidateUnobtrusive","Shared/Product/Price"],function(require){var $=require("jquery"),Price=require("Shared/Product/Price"),Validator=function(){return{_init:function(){var _this=this;this._goToErrorFieldBind();var adapters=$.validator.unobtrusive.adapters;adapters.add("checkbox",["value"],function(e){e.rules.checkbox=e.params,e.messages.checkbox=e.message}),$.extend($.validator.methods,{checkbox:function(e,t,n){return $(t).is(":checked").toString()==n.value}}),adapters.add("email",function(e){e.rules.email=e.params,e.messages.email=e.message}),adapters.add("emails",function(e){e.rules.emails=e.params,e.messages.emails=e.message}),$.extend($.validator.methods,{emails:function(e,t,n){var r=$.validator.methods.email,i=e.split(",");for(var s=0;s<i.length;s++){var o=i[s].replace(/^\s+|\s+$/g,"");if(o!=""){var u=r.call(this,o,t);if(u==0)return!1}}return!0}}),adapters.add("unique",["url"],function(e){e.rules.remote=e.params.url,e.messages.remote=e.message}),adapters.add("cregex",["exp"],function(e){e.rules.cregex=e.params,e.messages.cregex=e.message}),$.extend($.validator.methods,{cregex:function(e,t,n){var r=new RegExp(n.exp),i=$(t).val();return i.length==0?!0:r.test(i)}}),adapters.add("preview",["id","value","pattern"],function(e){e.rules.preview=e.params,e.messages.preview=e.message}),$.extend($.validator.methods,{preview:function(e,t,n){var r=$(":input[name="+n.id+"]:checked").val();if(r==n.value){var i=$(t).val();if(i==null||i=="")return!1;var s=new RegExp(n.pattern);return s.test(i)}return!0}}),adapters.add("xrange",["id","value","min","max"],function(e){e.rules.xrange=e.params,e.messages.xrange=e.message}),$.extend($.validator.methods,{xrange:function(e,t,n){var r=$(":input[name="+n.id+"]:checked").val();if(r==n.value){var i=$(t).val();if(i==null||i=="")return!1;var s=parseInt(i),o=parseInt(n.min),u=parseInt(n.max);return s>=o&&s<=u}return!0}}),adapters.add("price",function(e){e.rules.price=e.params,e.messages.price=e.message}),adapters.add("pricerange",["min","max"],function(e){e.rules.pricerange=e.params,e.messages.pricerange=e.message}),$.extend($.validator.methods,{price:function(e,t){var n=$(t).val();if(n==null||n=="")return!1;var r=Price.parse(n),i=/^\d+$|^\d*\.\d*$/,s=i.test(r);return s},pricerange:function(e,t,n){var r=$(t).val();if(r==null||r=="")return!1;var i=Price.parse(r);return n.min!=undefined&&n.min!=""&&n.max!=undefined&&n.max!=""?i>=parseFloat(n.min)&&i<=parseFloat(n.max):n.min==undefined||n.min==""||n.max!=undefined&&n.max!=""?n.min!=undefined&&n.min!=""||n.max==undefined||n.max==""?!0:i<=parseFloat(n.max):i>=parseFloat(n.min)}}),adapters.add("depend",["id","value"],function(e){e.rules.depend=e.params,e.messages.depend=e.message}),$.extend($.validator.methods,{depend:function(e,t,n){var r=$(n.id).val();return r!=n.value||e!=null&&e!=""?!0:!1}}),adapters.add("dependchk",["id","value"],function(e){e.rules.dependchk=e.params,e.messages.dependchk=e.message}),$.extend($.validator.methods,{dependchk:function(e,t,n){var r=$(n.id).is(":checked");return r.toString()!=n.value||e!=null&&e!=""?!0:!1}}),adapters.add("depends",["ids"],function(e){e.rules.depends=e.params,e.messages.depends=e.message}),$.extend($.validator.methods,{depends:function(value,element,param){var json=eval(param.ids),length=json.length,needToValid=!0;for(var i=0;i<length;i++){var item=json[i],dependVal=$(item.id).val();if(dependVal!=item.value){needToValid=!1;break}}return needToValid!=1||value!=null&&value!=""?!0:!1}}),adapters.add("rangelength",["range"],function(options){options.rules.range=eval(options.params.range),options.messages.range=options.message}),adapters.add("autocomplete",[],function(e){e.rules.autocomplete=e.params,e.messages.autocomplete=e.message}),$.extend($.validator.methods,{autocomplete:function(e,t,n){var r=$(t).attr("id");if(r==undefined)return!0;if($(t).attr("autocomplete")!=undefined||$(t).attr("autocomplete")=="")return!0;var i=$("#"+r),s=i.val();return s==""?!1:!0}}),adapters.add("theme",[],function(e){e.rules.theme=e.params,e.messages.theme=e.message}),$.extend($.validator.methods,{theme:function(e,t,n){var r=$(t),i=r.find("option"),s=r.val();return i.length>1&&s==""?!1:!0}}),adapters.add("username",["url","duplicateerrormsg"],function(e){e.rules.username=e.params,e.messages.username=e.message}),$.extend($.validator.methods,{username:function(e,t,n){if(this.optional(t))return"dependency-mismatch";var r=this.previousValue(t);this.settings.messages[t.name]||(this.settings.messages[t.name]={}),r.originalMessage=this.settings.messages[t.name].username;if(this.pending[t.name])return"pending";if(r.old===e)return r.valid;r.old=e;var i=this;this.startRequest(t);var s={};return s[t.name]=e,$.ajax($.extend(!0,{url:n.url,type:"POST",mode:"abort",port:"validate"+t.name,dataType:"json",data:s,success:function(e){var s=e.status==="Valid";if(s){var o=i.formSubmitted;i.prepareElement(t),i.formSubmitted=o,i.successList.push(t),i.showErrors(),_this.hideSuggestions()}else if(e.status=="Duplicated"){var u={};u[t.name]=n.duplicateerrormsg,i.showErrors(u),r.message=n.duplicateerrormsg,r.originalMessage=i.settings.messages[t.name].username,_this.displaySuggestions(t,e.usernames)}else{var u={};u[t.name]=e.errorMsg?e.errorMsg:i.settings.messages[t.name].username,i.showErrors(u),r.message=i.settings.messages[t.name].username,r.originalMessage=i.settings.messages[t.name].username,_this.hideSuggestions()}r.valid=s,i.stopRequest(t,s)}},n)),"pending"}})},hideSuggestions:function(){$("div.suggestions-username").hide()},displaySuggestions:function(e,t){var n=$("div.suggestions-username"),r=n.find("ul");r.empty(),$.tmpl("<li><button type='button' class='suggest-name-btn' val>${name}</button></li>",t).appendTo(r),r.on("click","button",function(t){var n=$(this).text();$(e).val(n),$(e).trigger("keyup")}),n.show()},_goToErrorFieldBind:function(){$.$body.on("click",".field-validation-error",function(){var e=$('[name="'+$(this).data("valmsg-for")+'"]');e.focus()})},validElements:function(e){_.each(e,function(e){var t=$(e).find("[data-val='true']");t.each(function(){$(this).valid()})})}}},validator=Validator();return validator._init(),$.validator.unobtrusive.parse(document),validator}),define("Shared/Common/Switcher",["Modules/Common","Shared/Common/Validator"],function(e,t){var n={type:"button",handlerCtnSelector:".switcherHandlerCtn",ctnSelector:null,handlerHide:!1,handlerSelector:".switcherHandler",enableKeyword:"enable",animationType:"toggle",animationTime:0},r=function(e,t){_.bindAll(this,"_action"),this._forcedOptions=t,this._forcedOptions=this._options=_.extend({id:e},n,this._forcedOptions),$.$body.off("change.switcher",'[data-switcher-id="'+e+'"]input'+this._options.handlerSelector).on("change.switcher",'[data-switcher-id="'+e+'"]input'+this._options.handlerSelector,this._action),$.$body.off("click.switcher",'[data-switcher-id="'+e+'"]:not(input)'+this._options.handlerSelector).on("click.switcher",'[data-switcher-id="'+e+'"]:not(input)'+this._options.handlerSelector,this._action),this._autoRun()};return r.bind=function(e,t){e=e||$.$body,t||(t={}),t.handlerSelector||(t.handlerSelector=n.handlerSelector),t.handlerSelector||n.handlerSelector;var i=r.getSwitchersId(e,t.handlerSelector||n.handlerSelector);_.each(i,function(e){new r(e,t)})},r.getSwitchersId=function(e,t){return _.chain(e.find("[data-switcher-id]"+t)).map(function(e){return $(e).data("switcher-id")}).uniq().value()},r.prototype._action=function(e){e.preventDefault();var t=$(e.currentTarget);this._switch(t)},r.prototype._setOptions=function(e){_.extend(this._options,{id:e.data("switcher-id")||this._options.id,type:e.data("switcher-type")||this._options.type,targetSelector:e.data("switcher-target")||this._options.targetSelector,ctnSelector:e.data("switcher-ctn")||this._options.ctnSelector,animationTime:e.data("switcher-animation-time")||this._options.animationTime,animationType:e.data("switcher-animation-type")||this._options.animationType,handlerHide:e.data("switcher-handler-hide")||this._options.handlerHide,enableKeyword:e.data("switcher-keyword")||this._options.enableKeyword},this._forcedOptions)},r.prototype._autoRun=function(){$('[data-switcher-id="'+this._options.id+'"]'+this._options.handlerSelector).each(_.bind(function(t,n){var r=$(n);this._options.enableKeyword=r.data("switcher-keyword")||this._options.enableKeyword,r.data("switcher-init")&&this._switch(r)},this))},r.prototype._switch=function(e){this._setOptions(e);var t=e.hasClass(this._options.enableKeyword);if(t&&this._options.type==="radio")return;var n=$.$body;this._options.ctnSelector&&(n=this._options.ctnSelector.substr(0,2)==="=>"?e.parents(this._options.ctnSelector.substr(2)):$(this._options.ctnSelector));var r=n.find("[data-switcher-id="+this._options.id+"]"+this._options.handlerSelector),i=n.find(".switcherTarget-"+this._options.id),s=n.find(".switcherTrail-"+this._options.id);this._toggleHandlers(t,e,r),this._toggleTrails(t,s),this._toggleTargets(t,i)},r.prototype._toggleHandlers=function(e,t,n){if(this._options.type==="radio")n.removeClass(this._options.enableKeyword),t.addClass(this._options.enableKeyword);else{var r=e?"removeClass":"addClass";n.filter('[data-switcher-target="'+this._options.targetSelector+'"]')[r](this._options.enableKeyword)}if(this._options.handlerHide){var i=$(this._options.handlerCtnSelector);i.length>0?i.toggle():(n.show(),n.filter('[data-switcher-target="'+this._options.targetSelector+'"]').hide())}},r.prototype._toggleTrails=function(e,t){var n=e;t[n?"show":"hide"]()},r.prototype._toggleTargets=function(e,n){var r=!e,i=this._options.animationTime,s=this._options.animationType,o=n.filter(this._options.targetSelector).add(n.find(this._options.targetSelector));this._options.type==="radio"&&o.is(":visible")&&(r=!1),this._options.type==="radio"&&(this._options.animationType===this._options.enableKeyword?n.not(o).removeClass(this._options.enableKeyword):n.not(o).hide(0)),this._options.animationType===this._options.enableKeyword?o.addClass(this._options.enableKeyword):o[s](i);if(r){var u=o.filter("[data-switcher-display]");u.each(function(){var e=$(this);e.css({display:e.data("switcher-display")})})}else this._options.type==="radio"&&t.validElements(o)},r}),function(e){var t=function(e,n,r){return 1===arguments.length?t.get(e):t.set(e,n,r)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(n,r,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(r===e?-1:i.expires),t._document.cookie=t._generateCookieString(n,r,i),t},t.expire=function(n,r){return t.set(n,e,r)},t._getExtendedOptions=function(n){return{path:n&&n.path||t.defaults.path,domain:n&&n.domain||t.defaults.domain,expires:n&&n.expires||t.defaults.expires,secure:n&&n.secure!==e?n.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){n=n||new Date;switch(typeof e){case"number":e=new Date(n.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!t._isValidDate(e))throw Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){return e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{},e=e+"="+t+(n.path?";path="+n.path:""),e+=n.domain?";domain="+n.domain:"",e+=n.expires?";expires="+n.expires.toUTCString():"",e+=n.secure?";secure":""},t._getCookieObjectFromString=function(n){var r={};n=n?n.split("; "):[];for(var i=0;i<n.length;i++){var s=t._getKeyValuePairFromCookieString(n[i]);r[s.key]===e&&(r[s.key]=s.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("="),t=0>t?e.length:t;return{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="1"===t.set("cookies.js",1).get("cookies.js");return t.expire("cookies.js"),e},t.enabled=t._areEnabled(),"function"==typeof define&&define.amd?define("cookies-js",[],function(){return t}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Cookies=t):window.Cookies=t}(),define("Shared/Common/registerTracking",["Modules/Common","cookies-js"],function(e,t){var n=function(){n.SetRegisterTrackingCookie(),this.bind()};return n.prototype.bind=function(){$.$body.on("click","a.ys_98567_buy, .tracking-buy",function(e){n.SetRegisterTrackingCookie({RegisterSource:"Buy"})}),$.$body.on("click",".tracking-dl-register, .tracking-dl",function(e){n.SetRegisterTrackingCookie({RegisterSource:"Download"})}),$.$body.on("click",".tracking-sub, .tracking-sub-register, .tracking-sub-more, .tracking-sub-fb-register",function(e){n.SetRegisterTrackingCookie({RegisterSource:"CatalogSubscription"})}),$.$body.on("click",".tracking-register, .tracking-fb-register",function(e){n.SetRegisterTrackingCookie()}),$.$body.on("click",".tracking-publish-register",function(e){n.SetRegisterTrackingCookie({RegisterSource:"Publish"})}),$.$body.on("click",".tracking-anonymous-register",function(e){n.SetRegisterTrackingCookie()})},n.SetRegisterTrackingCookie=function(e){e=e||{};var n=window.TrackingContext||{},r=e.RegisterSource||n.RegisterSource,i=e.ProductId||n.ProductId,s=e.RegisterPageType||n.RegisterPageType,o="";r!=null&&(o+="RegisterSource="+r+";"),i!=null&&(o+="ProductId="+i+";"),s!=null&&(o+="RegisterPageType="+s+";"),t.set("registerTracking",o,{expires:3600})},n});var _ga=_ga||{},_gaq=_gaq||[];_ga.getSocialActionTrackers_=function(e,t,n,r){return function(){var i=_gat._getTrackers();for(var s=0,o;o=i[s];s++)o._trackSocial(e,t,n,r)}},_ga.trackFacebook=function(e){try{FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(t){_gaq.push(_ga.getSocialActionTrackers_("facebook","like",t,e))}),FB.Event.subscribe("edge.remove",function(t){_gaq.push(_ga.getSocialActionTrackers_("facebook","unlike",t,e))}),FB.Event.subscribe("message.send",function(t){_gaq.push(_ga.getSocialActionTrackers_("facebook","send",t,e))}))}catch(t){}},_ga.trackTwitterHandler_=function(e,t){var n;if(e&&e.type=="tweet"||e.type=="click"){e.target.nodeName=="IFRAME"&&(n=_ga.extractParamFromUri_(e.target.src,"url"));var r=e.type+(e.type=="click"?"-"+e.region:"");_gaq.push(_ga.getSocialActionTrackers_("twitter",r,n,t))}},_ga.trackTwitter=function(e){intent_handler=function(t){_ga.trackTwitterHandler_(t,e)},twttr.events.bind("click",intent_handler),twttr.events.bind("tweet",intent_handler)},_ga.extractParamFromUri_=function(e,t){if(!e)return;var n=new RegExp("[\\?&#]"+t+"=([^&#]*)"),r=n.exec(e);if(r!=null)return unescape(r[1]);return},define("Shared/Common/TrackingHelper/gaSocial",function(){}),define("Shared/Common/TrackingHelper/main",["jquery","./gaSocial"],function(e){var t=function(){e.fn.extend({addTracking:t.addTracking,addTrackingOnClick:t.addTrackingOnClick})};return t.addTracking=function(e,t,n,r){var i=["_trackEvent"];i.push(e),i.push(t),n!=undefined&&n!=""&&i.push(n),r!=undefined&&r!=""&&i.push(r),i.push(!0),_gaq.push(i)},t.addTrackingOnClick=function(n,r){var i;r?i=r.currentTarget:i=this[0];var s=e(i).hasClass("popup");s||_gaq.push(["_set","hitCallback",function(){document.location=i.href}]),t.addTracking(n.category,n.action,n.label,n.value),r&&!s&&r.preventDefault()},t.addSocialTrackingOnClick=function(e,t){_gaq!=undefined&&_ga!=undefined&&_ga.getSocialActionTrackers_!=undefined&&_gaq.push(_ga.getSocialActionTrackers_(e,"share",t,null))},t}),define("Shared/Social/main",["require","Modules/Common","Shared/Common/TrackingHelper"],function(e){function n(){this._bind()}var t=e("Shared/Common/TrackingHelper");return n.showSocialLoginPage=function(e,t,n,r){var i=(screen.height-n)/2,s=(screen.width-r)/2;window.open(t,"","top="+i+",left="+s+",width="+r+",height="+n+",menubar=no,scrollbars=no,statusbar=no")},n.prototype._bind=function(){$.$body.on("click","a.facebook_share,a.facebook_link, .facebook_pop",_.bind(this._socialShareClicked,this,"facebook")),$.$body.on("click","a.twitter_share, a.twitter_link, .twitter_pop",_.bind(this._socialShareClicked,this,"twitter")),$.$body.on("click","a.social_share, a.social_link, .social_pop",_.bind(this._socialShareClicked,this,"social"))},n.prototype._socialShareClicked=function(e,r){r.preventDefault?r.preventDefault():r.returnValue=!1;var i=$(r.currentTarget).attr("href");i=i||$(r.currentTarget).data("href"),t.addSocialTrackingOnClick(e,i),n.showSocialLoginPage(r,i,405,785)},n}),define("Shared/Common/magicLink",["Modules/Common"],function(){var e=function(){return{_init:function(){this._transform(),this._bindNoTransformedLinks()},_getLink:function(e){var t=e.attr("rel");if(t.indexOf("mailto:")==0)return t;var n=t.split("|"),r=[],s="/",o="";for(i=0;i<n.length;i++){var u=n[i];u.length>0&&(u.charAt(0)=="*"?s=u.substr(1,u.length-1):u[0]=="?"||u[0]=="#"?o=u:r.push(u))}s.match("/$")==null&&(s+="/");var a=r.join("/");r.length>0&&a.match("-(\\d+)$")==null&&a.match("\\..{3,4}$")==null&&(a+="/");var f=(s!="/"&&s.indexOf("http")==-1?"http://"+s:s)+a+o;return f},_transform:function(){$("span.fklnk").each($.proxy(function(e,t){var n=$(t),r=n.html(),i=n.attr("class").replace("fklnk",""),s=n.attr("data-target"),o=this._getLink(n),u=$("<a></a>");u.attr("href",o),u.html(r),u.addClass(i),u.attr("title",n.attr("title")),s&&u.attr("target",s);var a=n.attr("style");a&&u.attr("style",a),n.replaceWith(u),_.each(n.data(),function(e,t){u.attr("data-"+t.replace("_","-"),e)})},this))},_bindNoTransformedLinks:function(){$.$body.on("click","span.fklnk",$.proxy(function(e){var t=$(e.target),n=this._getLink(t),r=t.attr("data-target");r=="_blank"?window.open(n,"_blank"):document.location=n},this))}}},t=e();return t._init(),t}),define("Shared/Common/AjaxHelper/callbacks",["jquery"],function(e){var t={checkNoTLoginPage:function(t){return t||(t=e(this).attr("href")),t.indexOf("LogOn")>=0?!1:!0}};return t}),define("Shared/Common/AjaxHelper/form",["./core"],function(){var e="ajax_form",t=function(){_.bindAll(this,"_cleanErrorMessagesFromValidation","_onSubmitFromForm"),$.$body.on("submit","form."+e,this._onSubmitFromForm),$.$body.on("keyup paste change","form."+e+" input",this._cleanErrorMessagesFromValidation)};return t.getConfFromElementType=function(e){var t={url:e[0].action,data:e.serialize(),type:e[0].method};return t},t.checkValid=function(){var t=$(this);return t.hasClass(e)?t.valid(e):!0},t.prototype._cleanErrorMessagesFromValidation=function(t){var n=$(t.currentTarget),r=n.hasClass(e)?n:n.parents("form."+e);return r.find(".messages:not([data-ajax-type]) .message").remove(),!1},t.prototype._onSubmitFromForm=function(e){e.preventDefault();var t=$(e.currentTarget);return this._cleanErrorMessagesFromValidation(e),t.valid()&&t.ajaxSubmit({$loading:$("[data-ajax-type="+t.data("ajax-type")+"].loading")}),!1},t}),define("Shared/Common/AjaxHelper/click",["./core"],function(){var e="ajaxSubmit",t=function(){_.bindAll(this,"_onSubmitFromClick"),$.$body.on("click","."+e,this._onSubmitFromClick),$.$body.on("keyup paste change","[data-ajax-type] input",this._cleanErrorMessagesFromValidation)};return t.getConfFromElementType=function(e){var t={url:e.data("ajax-action")||e.attr("href"),data:$("[data-ajax-type="+e.data("ajax-type")+"]").serialize(),type:e.data("ajax-method")};return t},t.checkValid=function(){return!0},t.prototype._cleanErrorMessagesFromValidation=function(e){$("[data-ajax-type="+$(e.currentTarget).data("ajax-type")+"].messages .message").remove()},t.prototype._onSubmitFromClick=function(e){this._cleanErrorMessagesFromValidation(e);var t=$(e.currentTarget);e.preventDefault(),t.ajaxSubmit({$loading:$("[data-ajax-type="+t.data("ajax-type")+"].loading")})},t}),define("Shared/Common/AjaxHelper/core",["require","Modules/Common","./callbacks","./form","./click"],function(e){var t=e("./form"),n=e("./click"),r=function(){new t,new n,$.fn.extend(this)};return r._loadingClass="loadingState",r._defaultDelay=3e3,r.prototype.displayMessage=function(t,n){var i=$(this),s=null;i[0].action?s=i.find(".messages:not([data-ajax-type])"):s=$("[data-ajax-type="+i.data("ajax-type")+"].messages");var o=["error","confirmation"];if(s.length===0){n&&n();return}if(!t.MessageType||t.Messages.length===0){s.hide(),n&&n();return}for(var u=0;u<o.length;u++)s.removeClass(o[u]);var a=[];a.push('<span class="message '+t.MessageType+'-msg">');for(var f=0;f<t.Messages.length;f++)a.push("<span>",t.Messages[f],"</span>");a.push("</span>"),s.find("message").remove(),s.append(a.join("")),s.show(),t.MessageType!=="error"&&window.setTimeout(function(){s.hide(),e.specified("Shared/Common/Modal")&&e("Shared/Common/Modal").stop(),n&&n()},r._defaultDelay)},r._getConfFromElementType=function(e,r){var i=e[0].action!==undefined?t.getConfFromElementType:n.getConfFromElementType,s=i(e);return s.url=r.url||s.url,s.type=r.method||s.type||"POST",s},r.callAjaxCb=function(e,t,n,r,i){var s=!0;return t[n]&&(s&=t[n].apply(e[0],i||[])),s},r.getEvents=function(e){var t=$._data(e[0],"events")||{};t.beforeSubmit=t.beforeSubmit||[];var n=$._data($.$body[0],"events");if(n.beforeSubmit){var r=_.filter(n.beforeSubmit,function(t){return e.is(t.selector)});t.beforeSubmit.push.apply(t.beforeSubmit,r)}return t.beforeSubmit},r.getBeforeSubmitCallback=function(e){var n=r.getEvents(e);if(n.length===0)return function(){return!0};var i={callbacks:[],execute:function(){var t=!0;return _.each(i.callbacks,function(n){t&=n.call(e[0])}),t}};return _.each(n,function(e){i.callbacks.push(e.handler)}),i.callbacks.push(t.checkValid),i.execute},r.prototype.ajaxSubmit=function(e){var t=$(this),n=t.data("callback");e||(e={}),e.before||(e.before=r.getBeforeSubmitCallback(t));if(!r.callAjaxCb(t,e,"before",n))return;t.addClass(r._loadingClass),e.$loading&&e.$loading.show();var i=r._getConfFromElementType(t,e),s=t.data("ajax-delay");s&&(r._defaultDelay=parseInt(s,10)),e.jsonp&&(i.type="GET",i.jsonp="jsoncallback",i.dataType="jsonp"),_.extend(i,{success:function(i){var s=i.message||i;t.displayMessage(s,function(){r.callAjaxCb(t,e,"success",n,[i])}),t.trigger("submitted",[i])},error:function(i,s,o){t.displayMessage({MessageType:"error",Messages:["Une erreur est survenue lors de l'envoi du formulaire"]}),r.callAjaxCb(t,e,"error",n,arguments),t.trigger("errorSubmit",arguments)},complete:function(){e.$loading&&e.$loading.hide(),t.removeClass(r._loadingClass)}}),$.ajax(i)},r.prototype.submitted=function(e){for(var t=0;t<this.length;t++)jQuery.event.add(this[t],"submitted",e,null);return this},r.prototype.errorSubmit=function(e){for(var t=0;t<this.length;t++)jQuery.event.add(this[t],"errorSubmit",e,null);return this},r}),define("Shared/Common/AjaxHelper/main",["./core","./callbacks"],function(e,t){var n=function(){new e};return n.callbacks=t,n}),define("Shared/Common/TextareaHelper/counter",["Modules/Common"],function(){var e=function(e){var t=$(e.currentTarget),n=t.parents(".textarea-ctn").find(".text_area_count"),r=t.val().length;n.html(r)};return e.bind=function(t){t=t||$.$body,t.off("change keyup paste",".textarea-ctn textarea").on("change keyup paste",".textarea-ctn textarea",e)},e}),define("Shared/Common/TextareaHelper/placeHolder",["Modules/Common"],function(){var e="textarea.placeholder",t=function(e){_.bindAll(this,"_onFocus","_onFocusOut"),this._$textarea=$(e),this._originalText=this._$textarea.val(),this._$textarea.off("focus").on("focus",this._onFocus),this._$textarea.off("focusout").on("focusout",this._onFocusOut)};return t.prototype._onFocus=function(){this._$textarea.val()===this._originalText&&this._$textarea.val("")},t.prototype._onFocusOut=function(){this._$textarea.val()===""&&this._$textarea.val(this._originalText)},t.bind=function(n){n=n||$.$body,n.find(e).each(function(){new t(this)})},t}),define("Shared/Common/TextareaHelper/main",["./counter","./placeHolder"],function(e,t){var n=function(){};return n.bind=function(n){n=n||$.$body,e.bind(n),t.bind(n)},n}),define("Shared/Common/SmoothLabel",["jquery","underscore"],function(e,t){var n=function(){return{_init:function(){t.bindAll(this,"bind")},_inputselector:'.input-txt input[type="text"], .input-txt input[type="password"]',_updatelabel:function(){var t=e(this),n=t.parent().find("label");if(n){var r=t.val();r==""?n.show():n.hide()}},bind:function(t){var n=t||e.$body;n.on("change keyup paste",this._inputselector,this._updatelabel),this.trigger(n)},trigger:function(e){e.find(this._inputselector).trigger("change")}}},r=n();return r._init(),r}),function(e,t,n){function s(t,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},i,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(Math.random()*1e5),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function o(t,n){var r=!0;return e.each(t,function(e,i){if(typeof n[e]=="undefined"||t[e]!==n[e])return r=!1,!1}),r}function f(){return!a&&u}function l(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string")return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if(typeof t[v[i]+r]=="string")return!0;return!1}var r="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};s.prototype={_init:function(){var t=this;if(n.querySelector){if(t.options.content!==null)t._content_set(t.options.content);else{var r=t.$el.attr("title");typeof r=="undefined"&&(r=null),t._content_set(r)}var i=t.options.functionInit.call(t.$el,t.$el,t.Content);typeof i!="undefined"&&t._content_set(i),t.$el.removeAttr("title").addClass("tooltipstered"),!u&&t.options.iconDesktop||u&&t.options.iconTouch?(typeof t.options.icon=="string"?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,t.options.trigger=="hover"?(t.$elProxy.on("mouseenter."+t.namespace,function(){if(!f()||t.options.touchDevices)t.mouseIsOverProxy=!0,t._show()}).on("mouseleave."+t.namespace,function(){if(!f()||t.options.touchDevices)t.mouseIsOverProxy=!1}),u&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):t.options.trigger=="click"&&t.$elProxy.on("click."+t.namespace,function(){(!f()||t.options.touchDevices)&&t._show()})}},_show:function(){var e=this;e.Status!="shown"&&e.Status!="appearing"&&(e.options.delay?e.timerShow=setTimeout(function(){(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&r.Content!==null){n&&r.callbacks.show.push(n),r.callbacks.hide=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,r.options.onlyOne&&e(".tooltipstered").not(r.$el).each(function(t,n){var r=e(n),i=r.data("tooltipster-ns");e.each(i,function(e,t){var n=r.data(t),i=n.status(),s=n.option("autoClose");i!=="hidden"&&i!=="disappearing"&&s&&n.hide()})});var i=function(){r.Status="shown",e.each(r.callbacks.show,function(e,t){t.call(r.$el)}),r.callbacks.show=[]};if(r.Status!=="hidden"){var s=0;r.Status==="disappearing"?(r.Status="appearing",l()?(r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.stop().fadeIn(i)):r.Status==="shown"&&i()}else{r.Status="appearing";var s=r.options.speed;r.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var o="tooltipster-"+r.options.animation,a="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",f=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",c=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";r.$tooltip=e('<div class="tooltipster-base '+r.options.theme+'" style="'+f+" "+c+" "+h+" "+a+'"><div class="tooltipster-content"></div></div>'),l()&&r.$tooltip.addClass(o),r._content_insert(),r.$tooltip.appendTo("body"),r.reposition(),r.options.functionReady.call(r.$el,r.$el,r.$tooltip),l()?(r.$tooltip.addClass(o+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.css("display","none").fadeIn(r.options.speed,i),r._interval_set(),e(t).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()});if(r.options.autoClose){e("body").off("."+r.namespace);if(r.options.trigger=="hover"){u&&setTimeout(function(){e("body").on("touchstart."+r.namespace,function(){r.hide()})},0);if(r.options.interactive){u&&r.$tooltip.on("touchstart."+r.namespace,function(e){e.stopPropagation()});var p=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(p),p=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(p)})}else r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()})}else r.options.trigger=="click"&&(setTimeout(function(){e("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive&&r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(e){e.stopPropagation()}))}}r.options.timer>0&&(r.timerHide=setTimeout(function(){r.timerHide=null,r.hide()},r.options.timer+s))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.Status=="hidden"||e("body").find(t.$tooltip).length===0)(t.Status=="shown"||t.Status=="appearing")&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),r=!1;o(n.dimension,t.elProxyPosition.dimension)&&(t.$elProxy.css("position")==="fixed"?o(n.position,t.elProxyPosition.position)&&(r=!0):o(n.offset,t.elProxyPosition.offset)&&(r=!0)),r||t.reposition()}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){typeof e=="object"&&e!==null&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");typeof e.Content=="string"&&!e.options.contentAsHTML?t.text(e.Content):t.empty().append(e.Content)},_update:function(e){var t=this;t._content_set(e),t.Content!==null?t.Status!=="hidden"&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(l()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){t.Status!="hidden"&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){t.Status!=="hidden"&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){t.Status!="hidden"&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var r=this;n&&r.callbacks.hide.push(n),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)}),r.callbacks.hide=[]};if(r.Status=="shown"||r.Status=="appearing"){r.Status="disappearing";var s=function(){r.Status="hidden",typeof r.Content=="object"&&r.Content!==null&&r.Content.detach(),r.$tooltip.remove(),r.$tooltip=null,e(t).off("."+r.namespace),e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX),e("body").off("."+r.namespace),r.$elProxy.off("."+r.namespace+"-autoClose"),r.options.functionAfter.call(r.$el,r.$el),i()};l()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(s)):r.$tooltip.stop().fadeOut(r.options.speed,s)}else r.Status=="hidden"&&i();return r},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return typeof e=="undefined"?this.Content:(this._update(e),this)},reposition:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width",""),n.elProxyPosition=n._repositionInfo(n.$elProxy);var r=null,i=e(t).width(),s=n.elProxyPosition,o=n.$tooltip.outerWidth(!1),u=n.$tooltip.innerWidth()+1,a=n.$tooltip.outerHeight(!1);if(n.$elProxy.is("area")){var f=n.$elProxy.attr("shape"),l=n.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),h=c.offset().left,p=c.offset().top,d=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(f=="circle"){var v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]);s.dimension.height=g*2,s.dimension.width=g*2,s.offset.top=p+m-g,s.offset.left=h+v-g}else if(f=="rect"){var v=parseInt(d[0]),m=parseInt(d[1]),y=parseInt(d[2]),b=parseInt(d[3]);s.dimension.height=b-m,s.dimension.width=y-v,s.offset.top=p+m,s.offset.left=h+v}else if(f=="poly"){var w=[],E=[],S=0,x=0,T=0,N=0,C="even";for(var k=0;k<d.length;k++){var L=parseInt(d[k]);C=="even"?(L>T&&(T=L,k===0&&(S=T)),L<S&&(S=L),C="odd"):(L>N&&(N=L,k==1&&(x=N)),L<x&&(x=L),C="even")}s.dimension.height=N-x,s.dimension.width=T-S,s.offset.top=p+x,s.offset.left=h+S}else s.dimension.height=c.outerHeight(!1),s.dimension.width=c.outerWidth(!1),s.offset.top=p,s.offset.left=h}var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;function H(){var n=e(t).scrollLeft();A-n<0&&(r=A-n,A=n),A+o-n>i&&(r=A-(i+n-o),A=i+n-o)}function B(n,r){s.offset.top-e(t).scrollTop()-a-_-12<0&&r.indexOf("top")>-1&&(P=n),s.offset.top+s.dimension.height+a+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1&&(P=n,M=s.offset.top-a-_-12)}if(P=="top"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left+D-j/2,M=s.offset.top-a-_-12,H(),B("bottom","top")}P=="top-left"&&(A=s.offset.left+D,M=s.offset.top-a-_-12,H(),B("bottom-left","top-left")),P=="top-right"&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top-a-_-12,H(),B("bottom-right","top-right"));if(P=="bottom"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left-j/2+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top","bottom")}P=="bottom-left"&&(A=s.offset.left+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top-left","bottom-left")),P=="bottom-right"&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top+s.dimension.height+_+12,H(),B("top-right","bottom-right"));if(P=="left"){A=s.offset.left-D-o-12,O=s.offset.left+D+s.dimension.width+12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A<0&&O+o>i){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=o+A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),A=s.offset.left-D-q-12-I,F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A<0&&(A=s.offset.left+D+s.dimension.width+12,r="left")}if(P=="right"){A=s.offset.left+D+s.dimension.width+12,O=s.offset.left-D-o-12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A+o>i&&O<0){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=i-A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A+o>i&&(A=s.offset.left-D-o-12,r="right")}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1)var U=n.$tooltip.css("background-color");else var U=n.options.arrowColor;r?r=="left"?(R="tooltipster-arrow-right",r=""):r=="right"?(R="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="";if(P=="top"||P=="top-left"||P=="top-right")var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");else if(P=="bottom"||P=="bottom-left"||P=="bottom-right")var z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color");else if(P=="left")var z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color");else if(P=="right")var z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color");else var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");z>1&&z++;var X="";if(z!==0){var V="",J="border-color: "+W+";";R.indexOf("bottom")!==-1?V="margin-top: -"+Math.round(z)+"px;":R.indexOf("top")!==-1?V="margin-bottom: -"+Math.round(z)+"px;":R.indexOf("left")!==-1?V="margin-right: -"+Math.round(z)+"px;":R.indexOf("right")!==-1&&(V="margin-left: -"+Math.round(z)+"px;"),X='<span class="tooltipster-arrow-border" style="'+V+" "+J+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var K='<div class="'+R+' tooltipster-arrow" style="'+r+'">'+X+'<span style="border-color:'+U+';"></span></div>';n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}return n},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(n.length===1){var r=typeof t.Content=="string"?t.Content:e("<div></div>").append(t.Content).html();t.$el.removeClass("tooltipstered").attr("title",r).removeData(t.namespace).removeData("tooltipster-ns").off("."+t.namespace)}else n=e.grep(n,function(e,n){return e!==t.namespace}),t.$el.data("tooltipster-ns",n);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){return typeof t=="undefined"?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]=="string"){var n=!0;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:n=!1}return n?!0:this}return this}if(typeof t[0]=="string"){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if(typeof i[t[0]]!="function")throw new Error('Unknown method .tooltipster("'+t[0]+'")');var s=i[t[0]](t[1],t[2]);if(s!==i)return r=s,!1}),r!=="#*$~&"?r:this}var o=[],u=t[0]&&typeof t[0].multiple!="undefined",a=u&&t[0].multiple||!u&&i.multiple,f=t[0]&&typeof t[0].debug!="undefined",l=f&&t[0].debug||!f&&i.debug;return this.each(function(){var n=!1,r=e(this).data("tooltipster-ns"),i=null;r?a?n=!0:l&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):n=!0,n&&(i=new s(this,t[0]),r||(r=[]),r.push(i.namespace),e(this).data("tooltipster-ns",r),e(this).data(i.namespace,i)),o.push(i)}),a?o:this};var u="ontouchstart"in t,a=!1;e("body").one("mousemove",function(){a=!0})}(jQuery,window,document),define("tooltipster",["jquery"],function(){}),define("Shared/Common/Tooltip/main",["jquery","tooltipster"],function(e){var t=function(){e(".help").tooltipster({position:"top",delay:180,effect:"fade",maxWidth:400,contentCloning:!1,functionInit:function(t){return e("[data-tooltip="+t.data("tooltip")+"].help_content")},functionBefore:function(e,t){e.tooltipster("content").show(),t()}})};return t}),function(e,t){typeof define=="function"&&define.amd?define("modalLib",["jquery","exports"],function(n,r){e.Modal=t(e,r,n)}):e.Modal=t(e,{},e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n){t.destroy=function(){n(".modal-modal, .modal").remove(),n.currentModal=undefined},t.loadFromUrl=function(e,t){this.destroy(),t=n.extend(t||{},{show:!0,unload:!0});var i=new r(t);i.showLoading(),i.show();if(e.indexOf("#")===0){var s=n(e);if(s){var o=s.clone().show();i.setContent(o),t.onLoaded&&t.onLoaded(i.html)}}else{var u={url:e,dataType:t.dataType!==undefined?t.dataType:"html",data:t.data!==undefined?t.data:"",type:t.type!==undefined?t.type:"GET",cache:!1,error:function(e){console.log(e.responseText),i.hide()},success:function(e){i.setContent(e),t.onLoaded&&t.onLoaded(i.html)}};if(t.form){var a=n(t.form).serializeArray();u.data=a,u.type="POST"}n.ajax(u)}n.currentModal=i},t.loadFromContent=function(e,t){this.destroy(),t=jQuery.extend(t||{},{show:!0,unload:!0}),n.currentModal=new r(t),n.currentModal.showLoading(),n.currentModal.show(),n.currentModal.setContent(e),t.onLoaded&&t.onLoaded(n.currentModal.html)},t.close=function(){this.destroy()};var r=function(t){var i=this,s=n(document),o=n(e);i.options=n.extend({},r.prototype.options,t||{}),i.content=n(i.template),i.content.on("click",".modal-closebtn, .popup-close",function(e){i.hide(),e.preventDefault()}),i.$modal=null,i.options.modal&&(i.$modal=n('<div class="modal-modal"></div>').css({opacity:i.options.modalOpacity,width:s.width(),height:s.height(),"z-index":i.options.zIndex+n(".modal").length}).appendTo(document.body)),i.$modal&&i.options.modalAutoHide&&i.$modal.on("click",n.proxy(i.hide,i)),i.options.autoclose!==null&&e.setTimeout(n.proxy(i.hide,i),i.options.autoclose),o.on("resize",n.proxy(i.resize,i)),s.on("keydown.modal",n.proxy(i.keyHandler,i))};return n.extend(r.prototype,{options:{autoclose:null,buttons:[],callback:null,center:!0,closeButton:!0,height:"auto",title:null,titleClass:null,modal:!1,modalOpacity:.2,modalAutoHide:!0,padding:"10px",show:!0,unload:!0,viewport:{top:"0px",left:"0px"},width:"500px",zIndex:1e4,windowMargin:50,loadJS:!0,exitOnEscapte:!0},template:'<div class="modal"><div class="modal-box"><div class="modal-wrapper"><div class="modal-content"></div></div></div></div>',loadingTemplate:'<div class="modal-loading"></div>',content:"",visible:!1,html:"",filterScripts:function(e){var t=[],r=[],i=[];return typeof e=="string"&&(e=e.replace(/<\/?(html|head|body)([^>]*)>/gi,"")),n.each(n(e),function(){n.nodeName(this,"script")?n(this).attr("src")?t.push(n(this).attr("src")):r.push(n(this).text()):i.push(this)}),[i,t,r]},setContent:function(e){var t=this.filterScripts(e);this.html=t[0];var r=n(".modal-content",this.content);r.css({padding:this.options.padding,height:this.options.height}).empty(),this.options.closeButton&&r.append('<span class="modal-closebtn"></span>'),r.append(this.html);if(this.options.loadJS){var i=t[1],s=document.getElementsByTagName("script")[0],o=document.createElement("script");o.type="text/javascript",o.textContent!==undefined?o.textContent=t[2].join("\n"):o.innerText=t[2].join("\n"),s.parentNode.insertBefore(o,s);for(var u=0;u<i.length;u++)o=document.createElement("script"),o.type="text/javascript",o.src=i[u],s.parentNode.insertBefore(o,s)}this.updatePosition()},viewport:function(){var e=n(window),t=e.height(),r=this.content.find(".modal-box:first").height(),i=(t-r)/2;if(r>t){var s=t-this.options.windowMargin*2;this.content.height(s),this.content.css({"overflow-y":"scroll"}),i=this.options.windowMargin}else this.content.css({"overflow-y":"",height:""});var o=e.width(),u=this.content.find(".modal-box:first").width(),a=(o-u)/2;return{top:i+e.scrollTop()+"px",left:a+e.scrollLeft()+"px"}},showLoading:function(){n(".modal-content",this.content).css({padding:this.options.padding,height:this.options.height}).empty().append(this.loadingTemplate)},show:function(){if(this.visible)return;this.options.modal&&this.$modal&&this.$modal.show(),this.content.appendTo(document.body),this.updatePosition()},updatePosition:function(){this.options.center&&(this.options.viewport=this.viewport(jQuery(".modal-box",this.content))),n(".modal-content").innerWidth()===0&&e.setTimeout(n.proxy(this.updatePosition,this),100),this.content.css({top:this.options.viewport.top,left:this.options.viewport.left,"z-index":this.options.zIndex+n(".modal").length}).show().animate({opacity:1},300),this.visible=!0},hide:function(e){if(!this.visible)return;var t=function(){this.$modal&&this.options.modal&&this.$modal.remove(),this.content.css({display:"none"}).remove(),this.visible=!1,this.options.unload&&this.unload(),this.options.onHide&&this.options.onHide()};return this.content.animate({opacity:0},300,n.proxy(t,this)),this},resize:function(){return this.options.modal&&n(".modal-modal").css({width:n(document).width(),height:n(document).height()}),this.options.center&&(this.options.viewport=this.viewport(n(".modal-box",this.content)),this.content.css({top:this.options.viewport.top,left:this.options.viewport.left})),this},toggle:function(){return this[this.visible?"hide":"show"](),this},unload:function(){this.visible&&this.hide();var e=this;n(window).unbind("resize",n.proxy(this.resize,this)),this.content.remove(),n.currentModal=undefined},keyHandler:function(e){this.options.exitOnEscapte&&e.keyCode===27&&this.hide()}}),t}),define("Shared/Library/create",["jquery","underscore"],function(e,t){var n=function(){return{_init:function(){t.bindAll(this,"bind","checkFormValidation")},bind:function(e){this.$form=e.find("#create_library"),this.$newLibraryListCheckBox=e.find("#select_folder_name"),this.$newLibraryCheckBox=e.find("#select_new_folder_name"),this.$newLibraryList=e.find('select[name="FolderId"]'),this.$newLibrary=e.find("input[name=FolderName]"),this._newLibraryListOnFocus(),this._newLibraryOnFocus(),this._newLibraryListCheckBoxOnChange(),this._newLibraryCheckBoxOnChange()},_newLibraryListOnFocus:function(){function e(){this.$newLibraryCheckBox.prop("checked",!1),this.$newLibraryListCheckBox.prop("checked",!0),this.checkFormValidation()}this.$newLibraryList.on("focus",t.bind(e,this))},_newLibraryOnFocus:function(){function e(){this.$newLibraryListCheckBox.prop("checked",!1),this.$newLibraryCheckBox.prop("checked",!0),this.checkFormValidation()}this.$newLibrary.on("focus",t.bind(e,this))},_newLibraryListCheckBoxOnChange:function(){this.$newLibraryListCheckBox.on("change",this.checkFormValidation)},_newLibraryCheckBoxOnChange:function(){this.$newLibraryCheckBox.on("change",this.checkFormValidation)},checkFormValidation:function(){var e=this.$form.validate(),t=e.errorContext.length;t>0&&(e.checkForm(),e.showErrors())}}},r=n();return r._init(),r}),define("Shared/Library/addProduct",["jquery","underscore"],function(e,t){var n=function(){return{_init:function(){t.bindAll(this,"bind","checkFormValidation")},bind:function(e){this.$createContent=e.find(".librarycreateNew"),this.$librariesList=e.find(".librariesList"),this.$form=e.find("#add_to_library_form"),this.$existingLibraryCheckBox=e.find("#select_folder_name"),this.$newLibraryCheckBox=e.find("#select_new_folder_name"),this.$existingLibrary=e.find('select[name="SelectedFolderName"]'),this.$newLibrary=e.find("#FolderName"),this.$createContent.hide(),this._libraryOnChange(),this.existingLibraryOnFocus(),this.createLibraryOnFocus(),this.existingLibraryOnChange(),this.createLibraryOnChange(),this.$librariesList.find("li").length===1&&this.$createContent.show()},_libraryOnChange:function(){function n(t){var n=e(t.currentTarget).val();n!==""?(this.checkFormValidation(),this.$createContent.hide()):this.$createContent.show()}this.$librariesList.on("change","input[name=FolderId]",t.bind(n,this))},existingLibraryOnChange:function(){this.$existingLibraryCheckBox.on("change",this.checkFormValidation)},createLibraryOnChange:function(){this.$newLibraryCheckBox.on("change",this.checkFormValidation)},existingLibraryOnFocus:function(){function e(){this.$newLibraryCheckBox.prop("checked",!1),this.$existingLibraryCheckBox.prop("checked",!0),this.checkFormValidation()}this.$existingLibrary.on("focus",t.bind(e,this))},createLibraryOnFocus:function(){function e(){this.$existingLibraryCheckBox.prop("checked",!1),this.$newLibraryCheckBox.prop("checked",!0),this.checkFormValidation()}this.$newLibrary.on("focus",t.bind(e,this))},checkFormValidation:function(){var e=this.$form.validate(),t=e.errorContext.length;t>0&&(e.checkForm(),e.showErrors())}}},r=n();return r._init(),r}),define("Shared/Embed/main",["Modules/Common"],function(){var Embed=function(e){_.bindAll(this,"_formChanged","_displayChanged"),this._options=e,this._$form=this._options.$ctn.find("#embed-form"),this._options.$ctn.on("click","textarea[name=embed-code]",this._autoSelectTextarea),this._options.$ctn.on("change","#embed-form",this._formChanged),this._options.$ctn.on("click",".embed_display div",this._displayChanged),this._updateEmbedCode()};return Embed.prototype._displayChanged=function(e){var t=$(e.currentTarget),n=t.parents("form"),r=t.parent().find("div");r.removeClass("active"),t.addClass("active"),this._updateEmbedCode(n)},Embed.prototype._formChanged=function(e){var t=$(e.currentTarget);this._updateEmbedCode(t)},Embed.prototype._updateEmbedCode=function(){var width=parseInt(this._$form.find("input[name=width]").val()),$embedBtn=this._$form.find(".embed-preview"),displayMode=this._$form.find(".embed_display div.active").attr("data-value"),height=displayMode=="double"?Math.round(width/2/this._options.ratio)+this._options.toolbarHeight:Math.round(width/this._options.ratio)+this._options.toolbarHeight,widthUrl=width,heightUrl=height,viewportRatio=parseInt(this._options.height/(displayMode==="double"?this._options.width*2:this._options.width)*100),flexible=this._$form.find("#embed-flex").is(":checked"),startPage=this._$form.find("input[name=firstpage]").val();flexible&&(height="100%",width="100%",heightUrl="auto",widthUrl="auto"),this._$form.find("input[name=width]").attr("disabled",flexible);var embedUrl="http://www.youscribe.com/BookReader/EmbedPreview?productId="+this._options.productId+"&width="+widthUrl+"&height="+heightUrl+"&startPage="+startPage+"&displayMode="+displayMode+"&isFlexible="+flexible;$embedBtn.attr("href",embedUrl),flexible||(width+="px",height+="px");var code=eval(this._options.code);this._$form.find("textarea[name=embed-code]").val(code.join(""))},Embed.prototype._autoSelectTextarea=function(){var e=0,t=this.value.length;if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}else this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)},Embed}),define("Shared/Common/Modal/callbacks",["require","jquery","Shared/Library/create","Shared/Library/addProduct","Shared/Common/Switcher","Shared/Common/TextareaHelper","Shared/Embed"],function(e,t){function y(e,n){t.get(e,n)}var n=e("Shared/Library/create"),r=e("Shared/Library/addProduct"),i=e("Shared/Common/Switcher"),s=e("Shared/Common/TextareaHelper"),o=e("Shared/Embed"),u=function(e,t){r.bind(e)},a=function(e){var t=window.embedOptions;t.$ctn=e,new o(t)},f=function(e){n.bind(e)},l=function(e){s.bind(e),i.bind(e)},c=function(e){i.bind(e)},h=function(e){i.bind(e)},p=function(e){var n="/Search/SearchAccount";t.facebooklist("#RecipientNames","#preadded","#facebook-auto",{url:n},10,{userfilter:1,casesensetive:0})},d=function(e){},v=function(e){var t=e.find("a.popup");t.attr("href","#offers_premium")},m=function(e){var t=e.find("a.popup");t.attr("href","#offers_premiumplus")},g=function(e){e.on("change","select#ThemeId",function(){var n=t(this).val();n!=null&&n!=""?y("/Product/LoadSubThemes/"+n,function(t){b(e,t)}):y("/Product/LoadAllSubThemes/",function(t){b(e,t)})}),e.on("change",".advSearch-price input[type=checkbox]",function(){var n=e.find("#IsFree"),r=e.find("#isFree"),i=r.is(":checked"),s=e.find("#isNotFree"),o=s.is(":checked"),u=t(this).val();o==i?n.val(null):i==1?n.val("true"):o==1&&n.val("false")})},b=function(e,n){var r=e.find("select#SubThemeId");r.find("option:gt(0)").remove();var i=n.items,s=i.length,o=0,u=[];while(o<s){var a=i[o];a!=null&&u.push("<option value='"+a.Id+"'>"+a.Label+"</option>"),o++}t(u.join("")).appendTo(r)},w={embed:a,subscription:h,newMessage:p,addToLibrary:u,addLibraryFolder:f,sharePublication:l,reportPublication:c,changePassword:d,premiumInfo:v,premiumInfoPlus:m,updateAdvanceSearchSubTheme:g};return w}),define("Shared/Common/Modal/main",["require","modalLib","./callbacks","Modules/Common"],function(e,t,n){var r=function(){var r=e("Shared/Common/SmoothLabel");return{_init:function(){$.$body.on("click",".popup",i._startFromEvent),$.fn.extend({bindModal:function(e){return this.on("click",function(t){i._startFromEvent(t,e)}),this}})},_startFromEvent:function(e,t){if(e.isDefaultPrevented())return!1;e.preventDefault();var n,r=$(e.currentTarget);r[0].tagName=="INPUT"&&r[0].form!=undefined?n=r[0].form.action:r[0].tagName=="A"?n=r.attr("href"):n=r.attr("href"),t=$.extend(t||{},{url:n,form:r[0].form,dataType:r.attr("data-type"),callback:r.attr("data-callback")}),i.start(t)},stop:function(){t.close()},start:function(e){var r=null,s=e.onLoaded,o={modal:!0,width:"auto",padding:"0px",modalOpacity:e.modalOpacity||.75};e=_.extend(o,e),e.onLoaded=function(t){var o=$(t);i.onLoaded(o),s&&s(o),n[e.callback]&&n[e.callback](o),e.url&&e.url.charAt(0)==="#"&&(r=$(e.url).detach())},e.onHide=function(){r&&r.appendTo("body")},e.url?t.loadFromUrl(e.url,e):e.content&&t.loadFromContent(e.content,e)},onLoaded:function(e){$.validator.unobtrusive&&$.validator.unobtrusive.parse(e),e.uploadFormLoading&&e.uploadFormLoading(),r&&r.trigger(e);var t=e.find("input[type=text],textarea,select").filter(":visible:first");t!=undefined&&t.focus()}}},i=r();return i._init(),i}),define("Shared/Account/ForgotPassword",["Modules/Common","Shared/Common/Modal"],function(e,t){var n=function(){$.$body.on("submitted","#forgot_password_container form",this._submitted)};return n.prototype._submitted=function(e,n){if(n.MessageType!="error"){var r=n.Messages[0];t.start({url:"/Account/ForgotPassword/Complete",type:"POST",data:"email="+r})}},n}),define("Shared/Account/Notification",["Modules/Common","Shared/Common/Modal"],function(e,t){function r(){window.IsAuthenticated&&(_.bindAll(this,"_notificationLoaded","_nbNotificationLoaded","_getNbNotification","_loadModalNotification"),this._$notificationCount=$("#notification_count"),setInterval(this._getNbNotification,n),this._getNbNotification(),$('[data-ajax-type="notification"]').on("submitted",this._notificationLoaded))}var n=3e4;return r.prototype._getNbNotification=function(){$.ajax({type:"POST",url:"/Notification/Count",success:this._nbNotificationLoaded})},r.prototype._loadModalNotification=function(e,t){var n=t.find("#notifications_container");n.html(""),t.find("#notification_details_count").html(e.count),$("#notificationTemplate").tmpl(e).appendTo(n),this._getNbNotification()},r.prototype._notificationLoaded=function(e,n){t.start({url:"#popup_notification",onLoaded:_.bind(this._loadModalNotification,this,n)})},r.prototype._nbNotificationLoaded=function(e){var t=parseInt(e);t=isNaN(t)?0:t,this._$notificationCount.html(t)},r}),requirejs.config({baseUrl:"/Scripts-Build/",paths:{require:"../bower_components/requirejs-bower/require",jquery:"Libraries/jquery",jqueryValidate:"Libraries/jquery.validate",jqueryValidateUnobtrusive:"Libraries/jquery.validate.unobtrusive",jqueryFileUpload:"../bower_components/jquery-file-upload/js/jquery.fileupload",jqueryIframeTransport:"../bower_components/jquery-file-upload/js/jquery.iframe-transport","jquery.ui.widget":"../bower_components/jquery-file-upload/js/vendor/jquery.ui.widget",underscore:"../bower_components/underscore/underscore",tooltipster:"../bower_components/tooltipster/js/jquery.tooltipster","cookies-js":"../bower_components/cookies-js/dist/cookies.min",smoothScroll:"../bower_components/smooth-scroll/dist/js/smooth-scroll",animateColor:"Libraries/jquery.animate.color",countUp:"../bower_components/countUp.js/countUp",bindPoly:"../bower_components/smooth-scroll/dist/js/bind-polyfill",modalLib:"../bower_components/Youscribe.Modal/modal",fcbkComplete:"Libraries/fcbkComplete",ToasterLib:"Libraries/jquery.noty.packaged",commonPlugins:"Modules/Common/plugins",premiumKlass:"Libraries/Premium/klass-all.min",premiumAjaxForm:"Libraries/Premium/ajaxForm",premiumHashChange:"Libraries/Premium/jquery.ba-hashchange.min",premiumIdTab:"Libraries/Premium/jquery.idTabs.min",premiumDatePicker:"Libraries/Premium/jquery-ui-datepicker-1.8.20.min",premiumDatePickerFr:"Libraries/Premium/jquery.ui.datepicker-fr",premiumTooltip:"Libraries/Premium/jquery.tools.min",premiumNameSpace:"Controller/Premium/Base/premium"},shim:{underscore:{exports:"_"},smoothScroll:{deps:["bindPoly"]},jqueryFileUpload:{deps:["jquery","jqueryIframeTransport","jquery.ui.widget"]},jqueryValidate:{deps:["jquery"]},jqueryValidateUnobtrusive:{deps:["jqueryValidate"]},tooltipster:{deps:["jquery"]},"cookies-js":{deps:["jquery"]},premiumDatePickerFr:{deps:["premiumDatePicker"]},premiumKlass:{deps:["jqueryValidateUnobtrusive","premiumAjaxForm","premiumHashChange","premiumIdTab","premiumDatePickerFr","premiumNameSpace","premiumTooltip"]}},packages:[{name:"Modules/Common",location:"Modules/Common"},{name:"Modules/Uploader",location:"Modules/Uploader"},{name:"Modules/Reader",location:"Modules/Reader"},{name:"Shared/Common/Modal",location:"Shared/Common/Modal"},{name:"Shared/Common/TrackingHelper",location:"Shared/Common/TrackingHelper"},{name:"Shared/Common/ToasterHelper",location:"Shared/Common/ToasterHelper"},{name:"Shared/Common/TextareaHelper",location:"Shared/Common/TextareaHelper"},{name:"Controller/Profile",location:"Controller/Profile"},{name:"Controller/DataCapture",location:"Controller/DataCapture"},{name:"Controller/Product/Download",location:"Controller/Product/Download"},{name:"Controller/Product/Page",location:"Controller/Product/Page"},{name:"Controller/Product/Publish",location:"Controller/Product/Publish"},{name:"Controller/Product/PublishComplete",location:"Controller/Product/PublishComplete"},{name:"Controller/BookReader/iframeEmbed",location:"Controller/BookReader/iframeEmbed"},{name:"Shared/Catalog",location:"Shared/Catalog"},{name:"Shared/Social",location:"Shared/Social"},{name:"Shared/Embed",location:"Shared/Embed"},{name:"Shared/Common/AjaxHelper",location:"Shared/Common/AjaxHelper"},{name:"Shared/Common/Validator",location:"Shared/Common/Validator"},{name:"Shared/Common/Tooltip",location:"Shared/Common/Tooltip"},{name:"Controller/Premium",location:"Controller/Premium"},{name:"Controller/Premium/Base",location:"Controller/Premium/Base"},{name:"Controller/Premium/Ads",location:"Controller/Premium/Ads"},{name:"Controller/Premium/Ads/Create",location:"Controller/Premium/Ads/Create"},{name:"Controller/Premium/LeadSharing",location:"Controller/Premium/LeadSharing"},{name:"Controller/Premium/LeadSharing/Create",location:"Controller/Premium/LeadSharing/Create"},{name:"Controller/Premium/LeadSharing/Index",location:"Controller/Premium/LeadSharing/Index"},{name:"Controller/Premium/LeadSharing/DashBoard",location:"Controller/Premium/LeadSharing/DashBoard"},{name:"Controller/Premium/LibrarySharing",location:"Controller/Premium/LibrarySharing"},{name:"Controller/Premium/LibrarySharing/Create",location:"Controller/Premium/LibrarySharing/Create"},{name:"Controller/Premium/LibrarySharing/Code",location:"Controller/Premium/LibrarySharing/Code"},{name:"Controller/Premium/LibrarySharing/DashBoard",location:"Controller/Premium/LibrarySharing/DashBoard"},{name:"Controller/Premium/Payment",location:"Controller/Premium/Payment"}]}),define("Modules/Common/main",["require","jquery","underscore","commonPlugins","Shared/Common/Switcher","Shared/Common/registerTracking","Shared/Social","Shared/Common/magicLink","Shared/Common/AjaxHelper","Shared/Common/TextareaHelper","Shared/Common/TrackingHelper","Shared/Common/Validator","Shared/Common/SmoothLabel","Shared/Common/Tooltip","Shared/Common/Modal","Shared/Account/ForgotPassword","Shared/Account/Notification"],function(e){var t=e("Shared/Common/SmoothLabel"),n=e("Shared/Social"),r=e("Shared/Common/AjaxHelper"),i=e("Shared/Common/Switcher"),s=e("Shared/Common/TextareaHelper"),o=e("Shared/Common/Tooltip"),u=e("Shared/Account/ForgotPassword"),a=e("Shared/Account/Notification"),f=e("Shared/Common/TrackingHelper"),l=e("Shared/Common/registerTracking"),c=function(){return{_init:function(){t.bind(),i.bind(),s.bind(),new r,new o,new n,new u,new a,new f,new l},random:function(){return((1+Math.random())*65536|0).toString(16).substring(1)}}},h=c();return h._init(),h}),require(["Modules/Common"]);